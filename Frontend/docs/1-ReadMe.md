# TCPOS BackOffice Sample Application

## Abstract

This application is intended to give a base sample of a React application using the BackOfficeCore and BackOfficeComponent libraries for
component binding and API connection. It contains a mimimal set of pages that show what the libraries provide.

In addition to the code documentation (which is generated by typedoc), some _howtos_ are provided that describe the steps needed to create a new page and 
bind the UI to the API.

The application is based on _React_ >= 18 and _typescript_, and it is bundled using _webpack_.

## Setup

The folder organization is the following:

- _docs_: documentation files
- _fonts_: icon fonts
- _public_: public folder with configuration files, images, etc.
- _src_: folder containing the application code; it contains, among the others, the following subfolders:
  - _components_: in this folder there are the React functional components used in the application, the theme overrides, etc.;
  - _core_: this folder contains the models, the controllers, and the logic of the application;
  - _assets_: static files, like images.
- _webpack_: Webpack configuration for dev and prod environments

In the main folder, the package.json and the tsconfig.json files are provided, along with the .npmrc file which configures the path to the tcpos libraries.

The package.json contains scripts to build the application in dev and prod environments. The dev environment is built in a hot reload mode, so that the UI is updated in real time after code changes.

## Application entry point

The starting point of the BackOffice application is the App component (in the _components_ folder); it is called by the application _bootstrap_ file and it is wrapped by a _WebDailyFullApp_ component, which is currently an empty wrapper. The App component provides all the needed wrapper components for the application:
- _StoreProvider_: this component provides a context for a global store imported from the _backoffice-core_ library; this store is used to make available application status info, interface info, local data for binding, etc. It is possible to add other independent stores to the application.
- A _ConfigProvider_ for theme configuration context.
- A _RouterProvider_: it uses a _router_ component created by the __createBrowserRouter__ function; the
BrowserRouter, from _react-router_ version 6, allows to manage navigation and navigation blocks within the application.

The next wrapper components are embedded as _children_ of _BrowserRouter_ and are included in the _AppInner_ component:
- _ThemeCustomization_: it defines the theme configuration
- _RTLLayout_: it manages the theme mode ('LTR' or 'RTL')
- _DailyThemeOverrides_: UI customization
- _WD_Snackbar_: component which provides a snackbar for the whole application
- _WD_ErrorBoundary_: application errors management
- _Locales_: it provides localization
- _ScrollTop_ component

Also, a _Backdrop_ component provides a waiting state with a _CircularProgress_ icon; then, the _MenuGenerate_ component provides the menu items to show and, at the end, there is a _Routes_ component which manages the application routes.

## Interface configuration loading
The application expects to find the base UI configuration in a json file called _configViewMenuGroups.json_ in the /public/config folder. It is loaded in a React _useEffect_ hook when the component loads. Then the UI configuration is saved in the store

## IOC registrations
After the loading of the _App_ component, the _index_ file in the _src_ folder executes the _appRegistrations_ function, which registers in an Inversion Of Control container the base classes, components, services, and functions. This allows overriding registrations and using different components or different implementations of interfaces.

The Inversion Of Control container is provided by the BackOffice core library